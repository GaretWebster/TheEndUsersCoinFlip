<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="bullion management site, rare coins, gold, silver, platinum">
    <meta name="author" content="CSE134B Dream Team">
    <link rel="stylesheet" type="text/css" href="./style/style.css">
    <meta name=viewport content="width=device-width, initial-scale=.8, minimum-scale = .8, user-scalable=yes">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <script src="./js/firebase.js"></script>
    <script src="./js/jquery-1.11.2.min.js"></script>
    <script src="./js/velocity.min.js"></script>
    <script src="./js/main.js"></script>
    <title>New Item - CoinFlip</title>
    <script>
        var ref = new Firebase("https://enduserscoinflip.firebaseio.com");
        ref.onAuth(function(authData) {
          if (authData) {
            console.log("Authenticated with uid:", authData.uid);
          } else {
            window.location = "index.html";
          }
        });
        
        
        function saveToStack() {
            var authData = ref.getAuth();

            if (authData) {
                var input_metal = document.getElementById("form_metal").value;
                var x = document.getElementById("form_type");
                var input_type = x.options[x.selectedIndex].text;            
                var input_purchase_date = document.getElementById("form_purchase_date").value;
                var input_quantity = document.getElementById("form_quantity").value;
                var input_premium = document.getElementById("form_premium").value;
                var input_unit_price = document.getElementById("form_unit_price").value;

                if(!input_purchase_date) {
                    alert("Please enter a purchase date!");
                }
                else if(!input_quantity){
                    alert("Please enter a quantity!");
                }
                else if(!input_premium) {
                    alert("Please enter a premium!");
                }
                else if(!input_unit_price) {
                    alert("Please enter a unit price!");
                }
                else {
                    ref.child("users").child(authData.uid).push({
                        metal: input_metal,
                        type: input_type,
                        purchase_date: input_purchase_date,
                        quantity: input_quantity,
                        premium: input_premium,
                        unit_price: input_unit_price,
                        percent: "0.999",
                        weight_unit_g: "1.244",
                        gu: "1.244",
                        ozt_u: "0.0400",
                        total_au: "0.0400",
                        total: "1199.10"
                    });  
                
                    window.location = "wire3.html";
                }
                

            }            
        }
        
        
    </script>
</head>

<body>
    <script type="text/javascript">
    loadTopNav();
    </script>
    <script type="text/javascript">
    loadSideNav(1);
    </script>
    <section class="main-section">
        <section class="coin_wrapper">
            <div class="mobile-nav">
                <a href="wire3.html">
                    <svg class="icon icon-keyboard-arrow-left">
                        <symbol id="icon-keyboard-arrow-left" viewBox="0 0 1024 1024">
                            <title>keyboard-arrow-left</title>
                            <path class="path1" d="M657.707 696.96l-195.627-195.627 195.627-195.627-60.373-60.373-256 256 256 256z"></path>
                        </symbol>
                        <use xlink:href="#icon-keyboard-arrow-left"></use>
                    </svg>
                </a>
                ADD ITEM
            </div>
            <div class="coin_main">
                <a href="wire3.html">
                    <div class="breadcrumb">
                        <svg class="icon icon-play-arrow-rev">
                            <symbol id="icon-play-arrow" viewBox="0 0 1024 1024">
                                <title>play-arrow</title>
                                <path class="path1" d="M682.667 213.333v597.333l-469.333-298.667z"></path>
                            </symbol>
                            <use xlink:href="#icon-play-arrow"></use>
                        </svg>
                        Add Item
                    </div>
                </a>
                <section class="coin_image">
                    <div class="img_box">
                        <div class="img_circle"></div>
                    </div>
                </section>
                <section class="coin_detail">
                    <table>
                        <tr>
                            <td>Metal</td>
                            <td>
                                <select id="form_metal">
                                    <option value="gold">Gold</option>
                                    <option value="silver">Silver</option>
                                    <option value="platinum">Platinum</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>
                                <select id="form_type">
                                    <option selected value="us_eagle">US Eagle</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Purchase Date</td>
                            <td>
                                <input id="form_purchase_date" name="purchase_date" placeholder="MM/DD/YYYY" />
                            </td>
                        </tr>
                        <tr>
                            <td>Qty.</td>
                            <td>
                                <input id="form_quantity" name="quantity" placeholder="1" />
                            </td>
                        </tr>
                        <tr>
                            <td>Premium</td>
                            <td>
                                <input id="form_premium" name="premium" placeholder="47.00" />
                            </td>
                        </tr>
                        <tr>
                            <td>Unit Price</td>
                            <td>
                                <input id="form_unit_price" name="unit_price" placeholder="1250.60" />
                            </td>
                        </tr>
                        <tr>
                            <td>Gold %</td>
                            <td>0.999</td>
                        </tr>
                        <tr>
                            <td>Weight/unit (g)</td>
                            <td>1.244</td>
                        </tr>
                        <tr>
                            <td>Gold g/u</td>
                            <td>1.244</td>
                        </tr>
                        <tr>
                            <td>Gold ozt/u</td>
                            <td>0.0400</td>
                        </tr>
                        <tr>
                            <td>Total au (ozt)</td>
                            <td>0.0400</td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL</strong></td>
                            <td><strong>1199.10</strong></td>
                        </tr>
                    </table>
                    <a onclick="saveToStack();"><span id="save">Save to My Stack</span></a>
                    <a href="wire3.html"><span id="cancel">Cancel</span></a>
                </section>
            </div>
        </section>
    </section>
    <script type="text/javascript">
    loadFooter();
    </script>
</body>

</html>
