function loadTopNav(){
	document.write("    <nav>");
	document.write("        <svg class=\"icon-spinner2\">");
	document.write("            <symbol id=\"icon-spinner2\" viewBox=\"0 0 1024 1024\">");
	document.write("                <title>spinner2<\/title>");
	document.write("                <path class=\"path1\" d=\"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z\"><\/path>");
	document.write("            <\/symbol>");
	document.write("            <use xlink:href=\"#icon-spinner2\"><\/use>");
	document.write("        <\/svg>");
	document.write("        <a href=\"wire2.html\">COINFLIP<\/a>");
	document.write("        <svg class=\"icon-cog\">");
	document.write("            <symbol id=\"icon-cog\" viewBox=\"0 0 1024 1024\">");
	document.write("                <title>cog<\/title>");
	document.write("                <path class=\"path1\" d=\"M933.79 610.25c-53.726-93.054-21.416-212.304 72.152-266.488l-100.626-174.292c-28.75 16.854-62.176 26.518-97.846 26.518-107.536 0-194.708-87.746-194.708-195.99h-201.258c0.266 33.41-8.074 67.282-25.958 98.252-53.724 93.056-173.156 124.702-266.862 70.758l-100.624 174.292c28.97 16.472 54.050 40.588 71.886 71.478 53.638 92.908 21.512 211.92-71.708 266.224l100.626 174.292c28.65-16.696 61.916-26.254 97.4-26.254 107.196 0 194.144 87.192 194.7 194.958h201.254c-0.086-33.074 8.272-66.57 25.966-97.218 53.636-92.906 172.776-124.594 266.414-71.012l100.626-174.29c-28.78-16.466-53.692-40.498-71.434-71.228zM512 719.332c-114.508 0-207.336-92.824-207.336-207.334 0-114.508 92.826-207.334 207.336-207.334 114.508 0 207.332 92.826 207.332 207.334-0.002 114.51-92.824 207.334-207.332 207.334z\"><\/path>");
	document.write("            <\/symbol>");
	document.write("            <use xlink:href=\"#icon-cog\"><\/use>");
	document.write("        <\/svg>");
	document.write("    <\/nav>");
}

function loadTopNavPersist(){
	document.write("    <nav style='display: block; visibility: visible;'>");
	document.write("        <svg class=\"icon-spinner2\">");
	document.write("            <symbol id=\"icon-spinner2\" viewBox=\"0 0 1024 1024\">");
	document.write("                <title>spinner2<\/title>");
	document.write("                <path class=\"path1\" d=\"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z\"><\/path>");
	document.write("            <\/symbol>");
	document.write("            <use xlink:href=\"#icon-spinner2\"><\/use>");
	document.write("        <\/svg>");
	document.write("        <a href=\"wire2.html\">COINFLIP<\/a>");
	document.write("        <svg class=\"icon-cog\">");
	document.write("            <symbol id=\"icon-cog\" viewBox=\"0 0 1024 1024\">");
	document.write("                <title>cog<\/title>");
	document.write("                <path class=\"path1\" d=\"M933.79 610.25c-53.726-93.054-21.416-212.304 72.152-266.488l-100.626-174.292c-28.75 16.854-62.176 26.518-97.846 26.518-107.536 0-194.708-87.746-194.708-195.99h-201.258c0.266 33.41-8.074 67.282-25.958 98.252-53.724 93.056-173.156 124.702-266.862 70.758l-100.624 174.292c28.97 16.472 54.050 40.588 71.886 71.478 53.638 92.908 21.512 211.92-71.708 266.224l100.626 174.292c28.65-16.696 61.916-26.254 97.4-26.254 107.196 0 194.144 87.192 194.7 194.958h201.254c-0.086-33.074 8.272-66.57 25.966-97.218 53.636-92.906 172.776-124.594 266.414-71.012l100.626-174.29c-28.78-16.466-53.692-40.498-71.434-71.228zM512 719.332c-114.508 0-207.336-92.824-207.336-207.334 0-114.508 92.826-207.334 207.336-207.334 114.508 0 207.332 92.826 207.332 207.334-0.002 114.51-92.824 207.334-207.332 207.334z\"><\/path>");
	document.write("            <\/symbol>");
	document.write("            <use xlink:href=\"#icon-cog\"><\/use>");
	document.write("        <\/svg>");
	document.write("    <\/nav>");
}

function loadSideNav(selected){
	document.write("    <aside>");
	document.write("        <a href=\"wire2.html\">");
	if(selected == 0)
		document.write("        <figure class='nav-selected'>");
	else
		document.write("        <figure>");
	document.write("            <br\/>");
	document.write("              <svg class=\"icon-home2\">");
	document.write("                    <symbol id=\"icon-home2\" viewBox=\"0 0 1024 1024\">");
	document.write("                        <title>home2<\/title>");
	document.write("                        <path class=\"path1\" d=\"M426.667 853.333v-256h170.667v256h213.333v-341.333h128l-426.667-384-426.667 384h128v341.333z\"><\/path>");
	document.write("                    <\/symbol>");
	document.write("                    <use xlink:href=\"#icon-home2\"><\/use>");
	document.write("                <\/svg>");
	document.write("");
	document.write("            <figcaption>Home<\/figcaption>");
	document.write("        <\/figure>       ");
	document.write("        <\/a> ");
	document.write("        <a href=\"wire3.html\">");
	if(selected == 1)
		document.write("        <figure class='nav-selected'>");
	else
		document.write("        <figure>");
	document.write("            Au");
	document.write("            <figcaption>My Gold<\/figcaption>");
	document.write("        <\/figure>       ");
	document.write("        <\/a> ");
	document.write("        <a href=\"wire6.html\">");
	if(selected == 2)
		document.write("        <figure class='nav-selected'>");
	else
		document.write("        <figure>");
	document.write("            Ag");
	document.write("            <figcaption>My Silver<\/figcaption>");
	document.write("        <\/figure>       ");
	document.write("        <\/a> ");
	document.write("        <a href=\"wire7.html\">");
	if(selected == 3)
		document.write("        <figure class='nav-selected'>");
	else
		document.write("        <figure>");
	document.write("            Pt");
	document.write("            <figcaption>My Platinum<\/figcaption>");
	document.write("        <\/figure>");
	document.write("        <\/a> ");
	document.write("    <\/aside>");
}

function loadFooter(){
	document.write("	<div id=\"overlay\">");
	document.write("		<div>");
    document.write("            <p><a href='#' onclick='promptLogout()'><span id='log-in-button'>Close<\/span><\/a><\/p>");
    document.write("            <section><h3>Change your email:<\/h3>");
    document.write("                <table>");
    document.write("                    <tr><td>Email address<\/td><td><input id='e_user_email' placeholder='enter email'><\/td><\/tr>");
    document.write("                    <tr><td>Current Password<\/td><td><input id='e_user_password' placeholder='enter old password'><\/td><\/tr>");
    document.write("                <\/table>");
    document.write("                <p><a id='log-in-button' style='cursor:pointer;' onclick='updateEmail()'>Update Email<\/a><\/p>");
    document.write("                <p id='e_update_alert'><\/p>");
    document.write("                <h3>Change your password:<\/h3>");
    document.write("                <table>");
    document.write("                    <tr><td>Current Password<\/td><td><input id='p_user_password' placeholder='enter old password'><\/td><\/tr>");
    document.write("                    <tr><td>New Password<\/td><td><input id='p_user_new_password' placeholder='enter new password'><\/td><\/tr>");
    document.write("                <\/table>");
    document.write("                <p><a id='log-in-button' style='cursor:pointer;' onclick='updatePassword()'>Update Password<\/a><\/p>");
    document.write("                <p id='p_update_alert'><\/p>");
    document.write("            <\/section>");
	document.write("			<p><a href='#' onclick='logout()'><span id='log-in-button'>Logout<\/span><\/a><\/p>");
	document.write("		<\/div>");
	document.write("	<\/div>");
	document.write("    <footer>");
	document.write("        &copy; 2015 CoinFlip");
	document.write("    <\/footer> ");

}

function logout() {
	ref.unauth();
	window.location="index.html";
}
function promptLogout() {
	el = document.getElementById("overlay");
	el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
}
function loadInfo() {
    document.getElementById("e_user_email").value = old_email;
    document.getElementById("e_user_password").value = "";
    document.getElementById("p_user_password").value = "";
    document.getElementById("p_user_new_password").value = "";
    document.getElementById("e_update_alert").innerHTML = "";
    document.getElementById("p_update_alert").value = "";


}



function updateItem() {
    var itemkey = window.location.hash.substr(1);
    var authData = ref.getAuth();

    dref = ref.child('users');
    dref = dref.child(authData.uid);
    dref = dref.child(itemkey);


    var input_metal = document.getElementById("form_metal").value;
    var x = document.getElementById("form_type");
    var input_type = x.options[x.selectedIndex].text;            
    var input_purchase_date = document.getElementById("form_purchase_date").value;
    var input_quantity = document.getElementById("form_quantity").value;
    var input_premium = document.getElementById("form_premium").value;
    var input_unit_price = document.getElementById("form_unit_price").value;


    if(input_metal) {
        dref.update({
          metal: input_metal
        });
    }
    if(input_type) {
        dref.update({
          type: input_type
        });
    }
    if(input_purchase_date) {
        dref.update({
          purchase_date: input_purchase_date
        });
    }
    if(input_quantity) {
        dref.update({
          quantity: input_quantity
        });
    }
    if(input_premium) {
        dref.update({
          premium: input_premium
        });
    }
    if(input_unit_price) {
        dref.update({
          unit_price: input_unit_price
        });
    }
	if(input_metal == "gold")
		window.location = "wire3.html";
	else if(input_metal == "silver")
		window.location = "wire6.html";
	else if(input_metal == "platinum")
		window.location = "wire7.html";

}

function deleteItem() {
	var itemkey = window.location.hash.substr(1);
    var authData = ref.getAuth();

	dref = ref.child('users');
	dref = dref.child(authData.uid);
	dref = dref.child(itemkey);
	dref.remove();

	window.location = "wire2.html";
}

var options = {
    
    ///Boolean - Whether grid lines are shown across the chart
    scaleShowGridLines : true,
    
    //String - Colour of the grid lines
    scaleGridLineColor : "rgba(104, 206, 222, 0.1)",
    
    //Number - Width of the grid lines
    scaleGridLineWidth : 1,
    
    //Boolean - Whether to show horizontal lines (except X axis)
    scaleShowHorizontalLines: true,
    
    //Boolean - Whether to show vertical lines (except Y axis)
    scaleShowVerticalLines: true,
    
    //Boolean - Whether the line is curved between points
    bezierCurve : true,
    
    //Number - Tension of the bezier curve between points
    bezierCurveTension : 0.4,
    
    //Boolean - Whether to show a dot for each point
    pointDot : true,
    
    //Number - Radius of each point dot in pixels
    pointDotRadius : 4,
    
    //Number - Pixel width of point dot stroke
    pointDotStrokeWidth : 1,
    
    //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
    pointHitDetectionRadius : 5,
    
    //Boolean - Whether to show a stroke for datasets
    datasetStroke : true,
    
    //Number - Pixel width of dataset stroke
    datasetStrokeWidth : 2,
    
    //Boolean - Whether to fill the dataset with a colour
    datasetFill : true,
    
    //String - A legend template
    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",
    
    responsive: true,
    
    maintainAspectRatio: false,
    
};

var data = {
labels: [],
datasets: []
};

function createXHR()
{
    try { return new XMLHttpRequest(); } catch(e) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); } catch (e) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); } catch (e) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) {}
    try { return new ActiveXObject("Microsoft.XMLHTTP"); } catch (e) {}
    
    alert("XMLHttpRequest not supported");
    return null;
}

var loadAllPrices = function(URLs, callbackMulti) {
    var isAllCallCompleted = false;
    var data = {};
    
    for (var i = 0; i < URLs.length; i++) {
        var callback = function (xhr, URL) {
            if (xhr.readyState == 4 && xhr.status == 200)
            {
                data[URL] = xhr.responseText;
                var size = 0;
                for (var index in data) {
                    if (data.hasOwnProperty(index))
                        size++;
                }
                if (size == URLs.length)
                    callbackMulti(data);
            }
        }
        
        loadPrices(URLs[i], callback);
    }
}

var loadPrices = function(URL, callback){
    var xhr = createXHR();
    
    if (xhr)
    {
        var currentDate = new Date(Date.now());
        var endDate = new Date();
        endDate.setDate(currentDate.getDate()-30);
        
        URL += "&trim_start=" + endDate.getFullYear() + "-" + (1+endDate.getMonth()) + "-" +
        endDate.getDate();
        URL += "&trim_end=" + currentDate.getFullYear() + "-" + (1+currentDate.getMonth()) + "-" + currentDate.getDate();
        
        xhr.open("GET",URL,true);
        xhr.send(null);
        xhr.onreadystatechange = function(){callback(xhr, URL);};
    }
}

var handleMultipleResponse = function(data) {
    var prices = [];
    var code = [];
    for (var index in data) {
        var parsedResponse = JSON.parse(data[index]);
        prices.push(parsedResponse["data"]);
        code.push(parsedResponse["code"]);
    }
    var pointStroke = "rgba(255,255,255,0.6)";
    var pointHighlightFill = "#fff";
    var pointHighlightStroke = "#fff";

    for (var i = 0; i < prices.length; i++)
    {
        var p = [];
        var d = [];
        for (var j = 0; j < prices[i].length; j++){
            p.push(prices[i][j][1]);
            d.push(prices[i][j][0]);

        }
        
        var change = (p[0] - p[1])/p[1];
        parseFloat(change).toFixed(2);
        
        if (code[i].indexOf("AG") == 0)
        {
            var color = "#F3FF88";
            $("#silver-market-price")[0].innerText = parseFloat(p[0]).toFixed(2);
            $("#silver-change")[0].innerText = parseFloat(change).toFixed(2);
            
            if (change < 0)
                $("#silver-change")[0].setAttribute("class", "neg-change");
        }
        else if (code[i].indexOf("AU") == 0)
        {
            var color = "#FF6D67";
            $("#gold-market-price")[0].innerText = parseFloat(p[0]).toFixed(2);
            $("#gold-change")[0].innerText = parseFloat(change).toFixed(2);
            
            if (change < 0)
                $("#gold-change")[0].setAttribute("class", "neg-change");
            
        }
        else
        {
            var color = "#FFA859";
            $("#platinum-market-price")[0].innerText = parseFloat(p[0]).toFixed(2);
            $("#platinum-change")[0].innerText = parseFloat(change).toFixed(2);
            
            if (change < 0)
                $("#platinum-change")[0].setAttribute("class", "neg-change");

        }
        
        
        p.reverse();
        d.reverse();
        
        var dataset = {
            label: code[i],
            fillColor: "rgba(104, 206, 222, 0.05)",
            strokeColor: color,
            pointColor: color,
            pointStrokeColor: pointStroke,
            pointHighlightFill: pointHighlightFill,
            pointHighlightStroke: pointHighlightStroke,
            data: p
        };
        
        window.data["datasets"].push(dataset);
        window.data["labels"] = d;
    }
    
    var ctx = document.getElementById("total-chart").getContext("2d");
    var coinChart = new Chart(ctx).Line(window.data,options);
    coinChart.update();
}

$(window).load(function() {

	var path = window.location.pathname;
	var page = path.split("/").pop();

	/* * * * * * * * * * * * * *
	 *                         *
	 *        GENERAL          *
	 *                         *
	 * * * * * * * * * * * * * */

	 $('.icon-spinner2').click(function(){
	 	location.reload();	
	 });

	 $('.icon-cog').click(function(){
        loadInfo();
		promptLogout();
	 });



	/* * * * * * * * * * * * * *
	 *                         *
	 *        GRAPHING         *
	 *                         *
	 * * * * * * * * * * * * * */

 	// graph for wire2 page
 	var drawGraph = function(){
 		var pointStroke = "rgba(255,255,255,0.6)";
 		var pointHighlightFill = "#fff";
 		var pointHighlightStroke = "#fff";
 		if(page == "wire2.html") {
 			var data = {
 				labels: ["January", "February", "March", "April", "May", "June", "July"],
 				datasets: [
 				{
 					label: "Gold Total",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#FF6D67",
 					pointColor: "#FF6D67",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [700,820,700,800,730,950,900]
 				},
 				{
 					label: "Platinum Total",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#FFA859",
 					pointColor: "#FFA859",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [467, 555, 490, 550, 555, 560, 660]
 				},
 				{
 					label: "Silver Total",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#F3FF88",
 					pointColor: "#F3FF88",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [200, 350, 300, 389, 330, 400, 488]
 				},
 				{
 					label: "1oz Gold",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#9FFF98",
 					pointColor: "#9FFF98",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [100, 110, 120, 90, 102, 135, 115]
 				},
 				{
 					label: "1oz Platinum",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#BBF5FF",
 					pointColor: "#BBF5FF",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [56, 78, 67, 68, 73, 80, 76]
 				},
 				{
 					label: "1oz Silver",
 					fillColor: "rgba(104, 206, 222, 0.05)",
 					strokeColor: "#C29FFF",
 					pointColor: "#C29FFF",
 					pointStrokeColor: pointStroke,
 					pointHighlightFill: pointHighlightFill,
 					pointHighlightStroke: pointHighlightStroke,
 					data: [20, 22, 20, 32, 35, 50, 40]
 				},
 				]
 			};

 			var options = {

			    ///Boolean - Whether grid lines are shown across the chart
			    scaleShowGridLines : true,

			    //String - Colour of the grid lines
			    scaleGridLineColor : "rgba(104, 206, 222, 0.1)",

			    //Number - Width of the grid lines
			    scaleGridLineWidth : 1,

			    //Boolean - Whether to show horizontal lines (except X axis)
			    scaleShowHorizontalLines: true,

			    //Boolean - Whether to show vertical lines (except Y axis)
			    scaleShowVerticalLines: true,

			    //Boolean - Whether the line is curved between points
			    bezierCurve : true,

			    //Number - Tension of the bezier curve between points
			    bezierCurveTension : 0.4,

			    //Boolean - Whether to show a dot for each point
			    pointDot : true,

			    //Number - Radius of each point dot in pixels
			    pointDotRadius : 4,

			    //Number - Pixel width of point dot stroke
			    pointDotStrokeWidth : 1,

			    //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
			    pointHitDetectionRadius : 20,

			    //Boolean - Whether to show a stroke for datasets
			    datasetStroke : true,

			    //Number - Pixel width of dataset stroke
			    datasetStrokeWidth : 2,

			    //Boolean - Whether to fill the dataset with a colour
			    datasetFill : true,

			    //String - A legend template
			    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",

			    responsive: true,

			    maintainAspectRatio: false,


			};

			var ctx = document.getElementById("total-chart").getContext("2d");
			var coinChart = new Chart(ctx).Line(data,options);
			coinChart.update();
		}
		else if(page =="wire3.html"){
			var data = {
				labels: ["January", "February", "March", "April", "May", "June", "July"],
				datasets: [
				{
					label: "Gold Total",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#FF6D67",
					pointColor: "#FF6D67",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [700,820,700,800,730,950,900]
				},
				{
					label: "1oz Gold",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#9FFF98",
					pointColor: "#9FFF98",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [100, 110, 120, 90, 102, 135, 115]
				}
				]
			};

			var options = {

			    ///Boolean - Whether grid lines are shown across the chart
			    scaleShowGridLines : true,

			    //String - Colour of the grid lines
			    scaleGridLineColor : "rgba(104, 206, 222, 0.1)",

			    //Number - Width of the grid lines
			    scaleGridLineWidth : 1,

			    //Boolean - Whether to show horizontal lines (except X axis)
			    scaleShowHorizontalLines: true,

			    //Boolean - Whether to show vertical lines (except Y axis)
			    scaleShowVerticalLines: true,

			    //Boolean - Whether the line is curved between points
			    bezierCurve : true,

			    //Number - Tension of the bezier curve between points
			    bezierCurveTension : 0.4,

			    //Boolean - Whether to show a dot for each point
			    pointDot : true,

			    //Number - Radius of each point dot in pixels
			    pointDotRadius : 4,

			    //Number - Pixel width of point dot stroke
			    pointDotStrokeWidth : 1,

			    //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
			    pointHitDetectionRadius : 20,

			    //Boolean - Whether to show a stroke for datasets
			    datasetStroke : true,

			    //Number - Pixel width of dataset stroke
			    datasetStrokeWidth : 2,

			    //Boolean - Whether to fill the dataset with a colour
			    datasetFill : true,

			    //String - A legend template
			    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",

			    responsive: true,

			    maintainAspectRatio: false,


			};

			var ctx = document.getElementById("total-chart").getContext("2d");
			var coinChart = new Chart(ctx).Line(data,options);
			coinChart.update();
		}
		
		else if(page =="wire6.html"){
			var data = {
				labels: ["January", "February", "March", "April", "May", "June", "July"],
				datasets: [
				{
					label: "Silver Total",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#FF6D67",
					pointColor: "#FF6D67",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [700,820,700,800,730,950,900]
				},
				{
					label: "1oz Silver",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#9FFF98",
					pointColor: "#9FFF98",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [100, 110, 120, 90, 102, 135, 115]
				}
				]
			};

			var options = {

			    ///Boolean - Whether grid lines are shown across the chart
			    scaleShowGridLines : true,

			    //String - Colour of the grid lines
			    scaleGridLineColor : "rgba(104, 206, 222, 0.1)",

			    //Number - Width of the grid lines
			    scaleGridLineWidth : 1,

			    //Boolean - Whether to show horizontal lines (except X axis)
			    scaleShowHorizontalLines: true,

			    //Boolean - Whether to show vertical lines (except Y axis)
			    scaleShowVerticalLines: true,

			    //Boolean - Whether the line is curved between points
			    bezierCurve : true,

			    //Number - Tension of the bezier curve between points
			    bezierCurveTension : 0.4,

			    //Boolean - Whether to show a dot for each point
			    pointDot : true,

			    //Number - Radius of each point dot in pixels
			    pointDotRadius : 4,

			    //Number - Pixel width of point dot stroke
			    pointDotStrokeWidth : 1,

			    //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
			    pointHitDetectionRadius : 20,

			    //Boolean - Whether to show a stroke for datasets
			    datasetStroke : true,

			    //Number - Pixel width of dataset stroke
			    datasetStrokeWidth : 2,

			    //Boolean - Whether to fill the dataset with a colour
			    datasetFill : true,

			    //String - A legend template
			    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",

			    responsive: true,

			    maintainAspectRatio: false,


			};

			var ctx = document.getElementById("total-chart").getContext("2d");
			var coinChart = new Chart(ctx).Line(data,options);
			coinChart.update();
		}
		
		else if(page =="wire7.html"){
			var data = {
				labels: ["January", "February", "March", "April", "May", "June", "July"],
				datasets: [
				{
					label: "Platinum Total",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#FF6D67",
					pointColor: "#FF6D67",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [700,820,700,800,730,950,900]
				},
				{
					label: "1oz Silver",
					fillColor: "rgba(104, 206, 222, 0.05)",
					strokeColor: "#9FFF98",
					pointColor: "#9FFF98",
					pointStrokeColor: pointStroke,
					pointHighlightFill: pointHighlightFill,
					pointHighlightStroke: pointHighlightStroke,
					data: [100, 110, 120, 90, 102, 135, 115]
				}
				]
			};

			var options = {

			    ///Boolean - Whether grid lines are shown across the chart
			    scaleShowGridLines : true,

			    //String - Colour of the grid lines
			    scaleGridLineColor : "rgba(104, 206, 222, 0.1)",

			    //Number - Width of the grid lines
			    scaleGridLineWidth : 1,

			    //Boolean - Whether to show horizontal lines (except X axis)
			    scaleShowHorizontalLines: true,

			    //Boolean - Whether to show vertical lines (except Y axis)
			    scaleShowVerticalLines: true,

			    //Boolean - Whether the line is curved between points
			    bezierCurve : true,

			    //Number - Tension of the bezier curve between points
			    bezierCurveTension : 0.4,

			    //Boolean - Whether to show a dot for each point
			    pointDot : true,

			    //Number - Radius of each point dot in pixels
			    pointDotRadius : 4,

			    //Number - Pixel width of point dot stroke
			    pointDotStrokeWidth : 1,

			    //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
			    pointHitDetectionRadius : 20,

			    //Boolean - Whether to show a stroke for datasets
			    datasetStroke : true,

			    //Number - Pixel width of dataset stroke
			    datasetStrokeWidth : 2,

			    //Boolean - Whether to fill the dataset with a colour
			    datasetFill : true,

			    //String - A legend template
			    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",

			    responsive: true,

			    maintainAspectRatio: false,


			};

			var ctx = document.getElementById("total-chart").getContext("2d");
			var coinChart = new Chart(ctx).Line(data,options);
			coinChart.update();
		}
	};

	//drawGraph();
    if(page == "wire2.html") {
            var urls = [
                        'http://www.quandl.com/api/v1/datasets/WSJ/AU_EGL.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB',
                        'http://www.quandl.com/api/v1/datasets/WSJ/AG_EIB.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB',
                        'http://www.quandl.com/api/v1/datasets/WSJ/PL_EFP.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB'
                        ];
            loadAllPrices(urls, handleMultipleResponse);
    }
    else if(page == "wire3.html") {
            var urls = [
                        'http://www.quandl.com/api/v1/datasets/WSJ/AU_EGL.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB'
                        ];
            loadAllPrices(urls, handleMultipleResponse);
    }
	
	else if(page == "wire6.html") {
            var urls = [
                        'http://www.quandl.com/api/v1/datasets/WSJ/AG_EIB.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB'
                        ];
            loadAllPrices(urls, handleMultipleResponse);
    }
	
	else if(page == "wire7.html") {
            var urls = [
                        'http://www.quandl.com/api/v1/datasets/WSJ/PL_EFP.json?auth_token=JJ4C4n7yWSzF3ZWzu3AB'
                        ];
            loadAllPrices(urls, handleMultipleResponse);
    }

	/* * * * * * * * * * * * * *
	 *                         *
	 *     MOBILE HANDLING     *
	 *                         *
	 * * * * * * * * * * * * * */

	 $('.mtb-1').click(function(){
	 	$('.graph-panel').removeClass('graph-panel-show');
	 	$('.market-status').fadeIn(0);
	 	$('.market-list').fadeIn(0);
	 	if( page == "wire3.html")
	 		$('.my_stack').fadeIn(0);
	 	$('.mtb-2').removeClass('mobile-toggle-selected');
	 	$('.mtb-1').addClass('mobile-toggle-selected');

	 });

	 $('.mtb-2').click(function(){
	 	$('.market-status').fadeOut(0);
	 	$('.market-list').fadeOut(0);
	 	if( page == "wire3.html")
	 		$('.my_stack').fadeOut(0);
	 	$('.mtb-1').removeClass('mobile-toggle-selected');
	 	$('.mtb-2').addClass('mobile-toggle-selected');
	 	$('.graph-panel').addClass('graph-panel-show');
	 	drawGraph();
	 });

	 var resizer = function(){
	 	winWidth = $(window).width();
	 	winHeight = $(window).height();

	 	if (winWidth > 999){
	 		$('.graph-panel').removeClass('graph-panel-show');
	 		$('.market-status').fadeIn(0);
	 		$('.market-list').fadeIn(0);
	 		if( page == "wire3.html")
	 			$('.my_stack').fadeIn(0);
	 		$('.mtb-2').removeClass('mobile-toggle-selected');
	 		$('.mtb-1').addClass('mobile-toggle-selected');
	 	}
	 };

	 $(window).resize(resizer);

});
